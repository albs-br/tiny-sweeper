document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("app"),t=[],l,o,i,n,s,d,a,r,c=()=>{i=!1,d=window.setInterval(h,1e3),o=10,t=[];for(let e=0;e<22;e++){t[e]=[];for(let l=0;l<12;l++)t[e][l]={hasBomb:!1,isClicked:!1,neighborhood:0,cell:void 0}}for(let n=0;n<10;n++){let s;do{s=!1;let a=b(22),r=b(12);t[a][r].hasBomb||(t[a][r].hasBomb=!0,s=!0)}while(!s)}for(let c=0;c<22;c++)for(let $=0;$<12;$++)if(!t[c][$].hasBomb){let p=0;c>0&&$>0&&t[c-1][$-1].hasBomb&&p++,c>0&&t[c-1][$].hasBomb&&p++,c>0&&$<11&&t[c-1][$+1].hasBomb&&p++,$>0&&t[c][$-1].hasBomb&&p++,$<11&&t[c][$+1].hasBomb&&p++,c<21&&$>0&&t[c+1][$-1].hasBomb&&p++,c<21&&t[c+1][$].hasBomb&&p++,c<21&&$<11&&t[c+1][$+1].hasBomb&&p++,t[c][$].neighborhood=p}_(),h()},h=()=>{if(a.innerText=o,i){let e=new Date(Date.now()-n),t=10>e.getSeconds()?"0"+e.getSeconds():e.getSeconds();r.innerText=e.getMinutes()+":"+t}else r.innerText="0:00"},_=()=>{let l="";l+="<button id='btnNewGame'>:P</button>",l+="<div id='displayBombsLeft' class='display'></div>",l+="<div id='displayTime' class='display'></div>";for(let o=0;o<22;o++)for(let i=0;i<12;i++)l+=`<div id='cell_${o}_${i}' class='cell unclicked' data-line='${o}' data-col='${i}'  onclick='window.CellClick(this);' onmousedown='window.CellClickDown(this, event);' onmouseup='window.CellClickUp(this, event);'></div>`;e.innerHTML=l;for(let n=0;n<22;n++)for(let s=0;s<12;s++)t[n][s].cell=document.getElementById("cell_"+n+"_"+s);a=document.getElementById("displayBombsLeft"),r=document.getElementById("displayTime"),$()},$=()=>{let e=Math.trunc(screen.width/12),o=1.5*e,i=e-6;l=e-1;for(let n=0;n<22;n++)for(let s=0;s<12;s++){let d=t[n][s].cell;d.style.left=s*e+"px",d.style.top=o+n*e+"px",t[n][s].isClicked?(d.style.width=l+"px",d.style.height=l+"px"):(d.style.width=i+"px",d.style.height=i+"px")}let h=document.getElementById("btnNewGame");h.style.width=o+"px",h.style.height=o+"px",h.style.left=screen.width/2-o/2+"px",h.addEventListener("click",c),a.style.width=o+"px",a.style.height=o+"px",r.style.width=2*o+"px",r.style.height=o+"px"};function b(e){return Math.floor(Math.random()*e)}let p=e=>{m=0;let l=parseInt(e.getAttribute("data-line")),o=parseInt(e.getAttribute("data-col"));t[l][o].hasBomb?e.innerHTML="*":y(e,""),f(e)};window.CellClick=p;let g=(e,t)=>(0==t.button&&(s=Date.now()),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),!1);window.CellClickDown=g;let u=(e,t)=>{if(0==t.button){let l=new Date(Date.now()-s);console.info(l.getMilliseconds())}return t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation(),!1};window.CellClickUp=u;let f=e=>{i||(i=!0,n=Date.now()),e.classList.remove("unclicked"),e.classList.add("empty"),e.style.width=l+"px",e.style.height=l+"px";let o=parseInt(e.getAttribute("data-line")),s=parseInt(e.getAttribute("data-col")),d=t[o][s];if(d.isClicked=!0,d.neighborhood>0)switch(e.innerHTML=d.neighborhood,d.neighborhood){case 1:e.style.color="blue";break;case 2:e.style.color="green";break;case 3:e.style.color="red";break;case 4:e.style.color="darkblue";break;case 5:e.style.color="darkred";break;default:e.style.color="black"}},m=0,y=(e,l)=>{if(++m>=1e3)return;let o=parseInt(e.getAttribute("data-line")),i=parseInt(e.getAttribute("data-col"));try{let n=t[o][i];if(n.hasBomb||n.isClicked)return;if(n.neighborhood>0){f(e);return}f(e),o>0&&"down"!=l&&y(t[o-1][i].cell,"up"),i>0&&"right"!=l&&y(t[o][i-1].cell,"left"),o<21&&"up"!=l&&y(t[o+1][i].cell,"down"),i<11&&"left"!=l&&y(t[o][i+1].cell,"right")}catch(s){}};window.addEventListener("resize",function(e){$()},!0),window.onbeforeunload=function(){return""},c()});